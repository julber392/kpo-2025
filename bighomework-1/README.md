# Большое Дз-1
Леонидов Максим Владимирович БПИ232-1
## Общая идея решения

Разработано консольное приложение для управления финансами пользователей, включающее:

- Создание, редактирование и удаление счетов (BankAccount), категорий (Category) и операций (Operation).

- Аналитику (разница доходов и расходов, группировка по категориям).

- Импорт и экспорт данных в форматы CSV, YAML, JSON.

- Управление данными, включая пересчет баланса при несоответствиях.

- Замер времени выполнения пользовательских сценариев.

Программа реализована с учетом принципов SOLID, GRASP и паттернов проектирования GoF.

# Информация о классах
## Entity
### BankAccount
Класс, который описывает сущность BankAccount, имеет поля id,name,balance (в копейках для удобства формирования операций).
Также в каждом классе сущностей реализован метод exportData, который позволяет выборочно экспортировать данные 
в нужных форматах, если какой либо формат не реализован для экспорта, бросается исключение.
### Category
Класс, который описывает сущность Category (категория операции), имеет поля

- Integer id; - id категории
- CategoryType type; -тип категории
- String name; -имя категории

Также в каждом классе сущностей реализован метод exportData, который позволяет выборочно экспортировать данные
в нужных форматах, если какой либо формат не реализован для экспорта, бросается исключение.
### Operation
Класс, который описывает операции в банке,
Также в каждом классе сущностей реализован метод exportData, который позволяет выборочно экспортировать данные
в нужных форматах, если какой либо формат не реализован для экспорта, бросается исключение.
### Exportable (Interface)
Интерфейс, который наделяет класс возможностью экспорта данных, имеет метод для реализации export()
### CategoryType
Перечисление, содержит в себе тип категории (Доход или Расход)

## Services
### IStorage (Interface)
Интерфейс, который наделяет класс способностью хранить данные, добавлять/удалять, имеет методы

- Map<Integer,TParam> getStorage(); - получить данные
- void add(TParam p); -добавить данные
- void delete(int index); - удалить данные
### BankAccountStorage
Класс для хранения BankAccount
### CategoryStorage
Класс для хранения Category
### OperationStorage
Класс для хранения Operation

## Factories
### BankAccountFactory
Класс для создания BankAccount. Имеет методы:
- public BankAccount createAccount(String name, Integer balance) - используется для создания нового BankAccount с новым id
- public BankAccount createAccount(Integer id, String name, Integer balance) -используется в фасаде для обновления существующего BankAccount
Также кидают исключения, если формат не соответствует требованиям
### CategoryFactory
Класс для создания Category, работает аналогично BankAccount
### OperationFactory
Класс для создания Operation, работает аналогично BankAccount
## Facades
### BankAccountFacade
Класс, который содержит в себе всю работу с BankAccount, имеет методы
- create - создать и положить на хранение объект BankAccount
- get - получить все объекты BankAccount
- delete - удалить по id объект BankAccount
- update - обновить существующий объект BankAccount
- ### CategoryFacade
Класс, который содержит в себе всю работу с Category (работает аналогично BankAccountFacade)
- ### OperationFacade
Класс, который содержит в себе всю работу с Operation (работает аналогично BankAccountFacade)

## data.exporter
Общий принцип работы такой: Каждый формат для экспорта (JsonExporter, CSVExporter, YamlExporter) наследуют 
интерфейс IDataExporter, который наделяет формат возможностью экспорта. Интерфейс содержит методы:
- void export(Map<Integer, ? extends Exportable> data, String filePath)throws IOException; - реализуется логика экспорта
- ReportFormat getFormat(); - для получения формата экспорта, чтобы в методе export передать формат в сущность (так как в каждой сущности по своему реализуется экспорт данных)

Также есть IDataManagerExporter, общий интерфейс менеджера экспортеров. Его реализует класс DataManagerExporter - единая точка хранения и вызова любого экспортера
## data.importer
Принцип работы: Все импортеры наследуются от Абстрактного класс DataImporter. Главный метод importData который вызывает 
3 абстрактных метода readFile,parseData,processData - их реализуют конкретные импортеры
## ReportFormat
Содержит перечисление всех доступных форматов для импорта или экспорта
## analytics
### Command
Интерфейс, который содержит метод execute(), его реализуют все классы для аналитики данных
### BalanceCalculationCommand
Подсчитывает разнице доходов и расходов для всех BankAccount
### GroupByCategoryCommand
Подсчитывает сумму операций по всем категориям
### TimedCommand
В конструкторе принимает Command, при вызове execute, помимо основной аналитики, подсчитывает время работы подсчета
## Принципы SOLID
## Single Responsibility Principle - принцип единственной ответственности


## Open closed Principle - принцип открытости-закрытости
Классы расширяются без изменения существующего кода:

Animal — базовый класс, от которого наследуются Herbo и Predator. Если нужно добавить новое животное, можно создать новый подкласс, не меняя Animal.

IInventory определяет интерфейс, а Computer, Table и Thing его реализуют. Добавление новых вещей не требует изменения интерфейса.

Вся система гибко расширяется через интерфейсы (IAnimalProvider, IThingProvider, IVetClinic), что позволяет добавлять новые реализации без модификации существующего кода.
## Liskov substitution Principle - принцип подстановки Барбары Лисков.
Herbo и Predator наследуются от Animal и могут использоваться везде, где ожидается Animal.
Monkey, Rabbit, Tiger, Wolf корректно заменяют Herbo и Predator, не нарушая логики программы.
Все классы, реализующие IInventory, работают одинаково и заменяют друг друга без изменения кода.
## Interface Segregation Principle - принцип разделения интерфейсов.
Интерфейсы разделены так, чтобы классы реализовывали только необходимые методы:

IAlive отвечает только за еду.

IHerbivore — за доброту травоядных.

IInventory — только за работу с Number.

IAnimalProvider, IThingProvider и IVetClinic имеют четкие обязанности, отвечают за свои сервисы.

Классы реализуют только нужные интерфейсы, не перегружаясь ненужными методами.

## Dependency Inversion Principle - принцип инверсии зависимостей.
Классы зависят от абстракций (интерфейсов), а не от конкретных реализаций.

ZooService не зависит напрямую от AnimalStorage, ThingStorage или VetClinic, а использует их через интерфейсы (IAnimalProvider, IThingProvider, IVetClinic).

Внедрение зависимостей через Spring DI позволяет подменять реализации без изменения кода.
## ZooApplication
Является точкой входа в программе (Main класс).
## ZooApplicationTests
Тестирование основных функций программы. Создается ZooService и добавляются животные 
 и вещи, далее выводится информация. Для проверки вывода в консоль нужно вручную запустить данный класс.

## Di контейнер
В программе используются Di контейнеры библиотеки Spring. С помошью autowired находятся Bean 
класса и внедряются зависимости.